# 系统设计

一些系统设计的基础知识

## 并行VS并发

- 并发的关键是你有处理多个任务的能力，不一定要同时
- 并行的关键是你有同时处理多个任务的能力

## 微服务网关

每一个页面都包含很多的服务，因此一次请求需要访问多个微服务

**客户端与微服务直接通信**

从理论上讲，客户端可以直接向每个微服务发送请求。每个微服务都有一个公开的端点 (`https ://<serviceName>.api.company.name`）。该 URL 将映射到微服务的负载均衡器，由它负责在可用实例之间分发请求。为了获取产品详情，移动客户端将逐一向上面列出的 N 个服务发送请求。

并且公网上可能会很低效，也非常难以对服务进行整改，重新发布

**使用 API 网关**

API 网关是一个服务器，是系统的唯一入口，API 网关封装了系统内部架构，为每个客户端提供一个定制的 API。它可能还具有其它职责，如身份验证、监控、负载均衡、缓存、“请求整形（request shaping）”与管理、静态响应处理。

相当于它代替你向服务发送请求，用户只需要发送一个粗粒度的API，由于在内网，效率会非常高，减少了服务器和客户端之间交互的次数

同时还可以实现一个断路器，可以防止客户端对无响应的服务进行不必要的等待

**缺点**

API 网关变成了开发瓶颈。为了暴露每个微服务的端点，开发人员必须更新 API 网关

